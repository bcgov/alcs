<ng-template #header>
  <div class="header">
    <h6 *ngIf="application">Application ID: {{ application.fileNumber }} | {{ application.type }}</h6>
    <div class="change-app-type-btn-wrapper">
      <button mat-flat-button color="accent" (click)="onApplicationTypeChangeClicked()">Change Application Type</button>
      <mat-icon color="accent" matTooltip="Changing application type will remove some inputs from your saved progress">
        help_outline
      </mat-icon>
    </div>
  </div>
</ng-template>

<app-custom-stepper
  class="edit-application"
  #cdkStepper
  (selectionChange)="onStepChange($event)"
  (beforeSwitchStep)="onBeforeSwitchStep($event)"
>
  <cdk-step label="Parcel Details">
    <div *ngIf="cdkStepper.selectedIndex === editAppSteps.AppParcel">
      <app-parcel-details [$application]="$application"></app-parcel-details>
    </div>
  </cdk-step>
  <cdk-step label="Other Parcels in the Community">
    <div *ngIf="cdkStepper.selectedIndex === editAppSteps.OtherParcel">
      <app-other-parcels [$application]="$application"></app-other-parcels>
    </div>
  </cdk-step>
  <cdk-step label="Primary Contact">
    <ng-container *ngTemplateOutlet="header"></ng-container>
    <div *ngIf="cdkStepper.selectedIndex === editAppSteps.PrimaryContact">
      <app-primary-contact [$application]="$application"></app-primary-contact>
    </div>
  </cdk-step>
  <cdk-step label="Government">
    <ng-container *ngTemplateOutlet="header"></ng-container>
    <div *ngIf="cdkStepper.selectedIndex === editAppSteps.Government">
      <app-select-government [$application]="$application"></app-select-government>
    </div>
  </cdk-step>
  <cdk-step label="Land Use">
    <ng-container *ngTemplateOutlet="header"></ng-container>
    <div *ngIf="cdkStepper.selectedIndex === editAppSteps.LandUse">
      <app-land-use [$application]="$application"></app-land-use>
    </div>
  </cdk-step>
  <cdk-step label="Proposal">
    <ng-container *ngTemplateOutlet="header"></ng-container>
    <div *ngIf="cdkStepper.selectedIndex === editAppSteps.Proposal">
      <app-nfu-proposal [$application]="$application"></app-nfu-proposal>
    </div>
  </cdk-step>
  <cdk-step label="Upload Attachments">
    <ng-container *ngTemplateOutlet="header"></ng-container>
    <div *ngIf="cdkStepper.selectedIndex === editAppSteps.Attachments">
      <app-other-attachments [$application]="$application"></app-other-attachments>
    </div>
  </cdk-step>
  <cdk-step label="Review & Submit">
    <ng-container *ngTemplateOutlet="header"></ng-container>
    <div *ngIf="cdkStepper.selectedIndex === editAppSteps.ReviewAndSubmit">
      <app-review-and-submit [$application]="$application"></app-review-and-submit>
    </div>
  </cdk-step>
  <cdk-step label="9">
    <p>Note this is only for testing purposes. The submission process will be changed in follow-up tickets.</p>
    <button (click)="onSubmitToAlcs()">Submit to ALCS</button>
  </cdk-step>
</app-custom-stepper>
