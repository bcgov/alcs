<div class="dialog-container">
  <div mat-dialog-title>
    <h4>Change NOI Type</h4>
  </div>

  <div mat-dialog-content class="change-app-type-modal">
    @if (stepIdx === warningStep) {
      <div>
        <div class="step-body">
          <app-warning-banner>
            <b>Warning:</b> Changing the notice of intent type will remove some inputs from your saved progress. Do you
            want to continue?
          </app-warning-banner>
        </div>
      </div>
    }

    <div [ngClass]="{ 'display-none': stepIdx !== applicationTypeStep }">
      <div class="subheading2 step-description">Select an option to learn more about the notice of intent type.</div>
      <mat-radio-group class="app-type-radio-group" (change)="onTypeSelected($event)" color="primary" required>
        @for (appType of noiTypes; track appType) {
          <mat-radio-button [value]="appType.code" class="radio-option">
            {{ appType.portalLabel }}
          </mat-radio-button>
        }
      </mat-radio-group>

      @if (stepIdx === applicationTypeStep) {
        <div>
          @if (selectedType) {
            <div id="warningBanner" class="warning-banner">
              <div>
                <b class="app-type-label">{{ selectedType.portalLabel }}</b>
              </div>
              <div
                id="typeDescription"
                [ngClass]="{ 'ellipsis-3': !readMoreClicked }"
                [innerHtml]="selectedType.htmlDescription"
              ></div>
              @if (!!selectedType) {
                <span
                  class="read-more-btn"
                  [ngClass]="{ 'display-none': !isReadMoreVisible }"
                  (click)="onReadMoreClicked()"
                  ><u>Read {{ readMoreClicked ? 'Less' : 'More' }}</u>
                </span>
              }
            </div>
          }
        </div>
      }
    </div>

    @if (stepIdx === confirmationStep) {
      <div>
        <div class="step-header">
          <h5>Are you sure you want to change your notice of intent type?</h5>
        </div>
      </div>
    }
  </div>
</div>

<div mat-dialog-actions class="dialog-action-container" align="end">
  @if (stepIdx === warningStep) {
    <div class="dialog-controls-wrapper">
      <button mat-stroked-button color="primary" (click)="closeDialog()">cancel</button>
      <button mat-flat-button color="primary" (click)="next()">next</button>
    </div>
  }

  @if (stepIdx === applicationTypeStep) {
    <div class="dialog-controls-wrapper">
      <button mat-stroked-button color="primary" (click)="back()">back</button>
      <button mat-flat-button color="primary" [disabled]="!selectedType" (click)="next()">next</button>
    </div>
  }

  @if (stepIdx === confirmationStep) {
    <div class="dialog-controls-wrapper">
      <button mat-stroked-button color="primary" (click)="back()">back</button>
      <button mat-flat-button color="primary" (click)="onSubmit()">confirm</button>
    </div>
  }
</div>
