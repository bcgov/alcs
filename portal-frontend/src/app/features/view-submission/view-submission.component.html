<button *ngIf="isMobile" (click)="onNavigateHome()" mat-button color="accent">
  <mat-icon>chevron_left</mat-icon>Return to Inbox
</button>
<div aria-hidden="true" class="banner absolute">
  <div>
    <h4 *ngIf="application">Application ID: {{ application.fileNumber }}</h4>
  </div>
  <div class="banner-status">
    <div>
      <div class="subheading2">Status Date</div>
      <span *ngIf="application">{{ application.lastStatusUpdate | date }}</span>
    </div>
    <div>
      <div class="subheading2">Application Status</div>
      <span *ngIf="application">{{ application.status.label }}</span>
    </div>
  </div>
</div>
<div class="banner">
  <div>
    <h4 *ngIf="application">Application ID: {{ application.fileNumber }}</h4>
  </div>
  <div class="banner-status">
    <div>
      <div class="subheading2">Status Date</div>
      <span *ngIf="application">{{ application.updatedAt | date }}</span>
    </div>
    <div>
      <div class="subheading2">Application Status</div>
      <span *ngIf="application">{{ application.status.label }}</span>
    </div>
  </div>
</div>
<button *ngIf="!isMobile" (click)="onNavigateHome()" mat-button color="accent">
  <mat-icon>chevron_left</mat-icon>Return to Inbox
</button>
<div *ngIf="!isMobile">
  <div class="navigation-wrapper">
    <mat-tab-group>
      <mat-tab label="Application">
        <div *ngIf="application" class="content">
          <section>
            <div class="header">
              <h3>Application</h3>
              <div class="btns-wrapper">
                <button
                  [routerLink]="'/application/' + application.fileNumber + '/edit'"
                  *ngIf="application.canEdit"
                  mat-flat-button
                  color="primary"
                >
                  Edit Application
                </button>
                <button
                  *ngIf="application.canReview"
                  (click)="onReview(application.fileNumber)"
                  mat-flat-button
                  color="primary"
                >
                  Review Application
                </button>
                <button mat-flat-button color="accent" (click)="onDownloadSubmissionPdf(application.fileNumber)">
                  Download PDF
                </button>
              </div>
            </div>
            <app-application-details
              [showEdit]="false"
              [showErrors]="false"
              [$application]="$application"
              [$applicationDocuments]="$applicationDocuments"
            ></app-application-details>
          </section>
        </div>
        <div class="buttons" *ngIf="application">
          <div>
            <button
              *ngIf="application.canEdit"
              mat-stroked-button
              color="warn"
              (click)="onCancel(application.fileNumber)"
            >
              Cancel Application
            </button>
          </div>
          <div>
            <button
              [routerLink]="'/application/' + application.fileNumber + '/edit'"
              *ngIf="application.canEdit"
              mat-flat-button
              color="primary"
            >
              Edit Application
            </button>
            <button
              *ngIf="application.canReview"
              (click)="onReview(application.fileNumber)"
              mat-flat-button
              color="primary"
            >
              Review Application
            </button>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Local/First Nation Gov Review">
        <div class="content">
          <app-lfng-review
            [$application]="$application"
            [$applicationDocuments]="$applicationDocuments"
          ></app-lfng-review>
          <div class="buttons" *ngIf="application">
            <div>
              <button
                *ngIf="application.canEdit"
                mat-stroked-button
                color="warn"
                (click)="onCancel(application.fileNumber)"
              >
                Cancel Application
              </button>
            </div>
            <div>
              <button
                [routerLink]="'/application/' + application.fileNumber + '/edit'"
                *ngIf="application.canEdit"
                mat-flat-button
                color="primary"
              >
                Edit Application
              </button>
              <button
                *ngIf="application.canReview"
                (click)="onReview(application.fileNumber)"
                mat-flat-button
                color="primary"
              >
                Review Application
              </button>
            </div>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="ALC Review and Decision">
        <div class="content">
          <app-alc-review
            [$application]="$application"
            [$applicationDocuments]="$applicationDocuments"
          ></app-alc-review>
          <div class="buttons" *ngIf="application">
            <div>
              <button
                *ngIf="application.canEdit"
                mat-stroked-button
                color="warn"
                (click)="onCancel(application.fileNumber)"
              >
                Cancel Application
              </button>
            </div>
            <div>
              <button
                [routerLink]="'/application/' + application.fileNumber + '/edit'"
                *ngIf="application.canEdit"
                mat-flat-button
                color="primary"
              >
                Edit Application
              </button>
              <button
                *ngIf="application.canReview"
                (click)="onReview(application.fileNumber)"
                mat-flat-button
                color="primary"
              >
                Review Application
              </button>
            </div>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
<div *ngIf="isMobile">
  <h6>Section:</h6>
  <mat-form-field class="page-selector" appearance="outline">
    <mat-select placeholder="Select one" [(ngModel)]="selectedStep">
      <mat-option [value]="MOBILE_STEP.APPLICATION">Application Submission</mat-option>
      <mat-option [value]="MOBILE_STEP.LFNG_INFO">Local/First Nation Gov Review</mat-option>
      <mat-option [value]="MOBILE_STEP.ALC_INFO">ALC Review and Decision</mat-option>
    </mat-select>
  </mat-form-field>
  <button class="change-step" mat-flat-button color="primary" (click)="onChangeMobileStep()">View</button>
  <div *ngIf="application && mobileStep === MOBILE_STEP.INTRODUCTION" class="content">
    <img class="tractor" src="/assets/tractor.png" alt="Tractor" />
    <span class="center">Select section to view more</span>
  </div>
  <div *ngIf="application && mobileStep === MOBILE_STEP.APPLICATION" class="content">
    <section>
      <div class="header">
        <h3>Application</h3>
      </div>
      <div class="buttons" *ngIf="application">
        <div>
          <button
            [routerLink]="'/application/' + application.fileNumber + '/edit'"
            *ngIf="application.canEdit"
            mat-flat-button
            color="primary"
          >
            Edit Application
          </button>
          <button
            *ngIf="application.canReview"
            (click)="onReview(application.fileNumber)"
            mat-flat-button
            color="primary"
          >
            Review Application
          </button>
          <button mat-flat-button color="accent" (click)="onDownloadSubmissionPdf(application.fileNumber)">
            Download PDF
          </button>
        </div>
      </div>
      <app-application-details
        [showEdit]="false"
        [showErrors]="false"
        [$application]="$application"
        [$applicationDocuments]="$applicationDocuments"
      ></app-application-details>
      <div class="buttons" *ngIf="application">
        <div>
          <button
            *ngIf="application.canEdit"
            mat-stroked-button
            color="warn"
            (click)="onCancel(application.fileNumber)"
          >
            Cancel Application
          </button>
        </div>
        <div>
          <button
            [routerLink]="'/application/' + application.fileNumber + '/edit'"
            *ngIf="application.canEdit"
            mat-flat-button
            color="primary"
          >
            Edit Application
          </button>
          <button
            *ngIf="application.canReview"
            (click)="onReview(application.fileNumber)"
            mat-flat-button
            color="primary"
          >
            Review Application
          </button>
        </div>
      </div>
    </section>
  </div>
  <div *ngIf="application && mobileStep === MOBILE_STEP.LFNG_INFO" class="content">
    <app-lfng-review [$applicationDocuments]="$applicationDocuments" [$application]="$application"></app-lfng-review>
    <div class="buttons" *ngIf="application">
      <div>
        <button *ngIf="application.canEdit" mat-stroked-button color="warn" (click)="onCancel(application.fileNumber)">
          Cancel Application
        </button>
      </div>
      <div>
        <button
          [routerLink]="'/application/' + application.fileNumber + '/edit'"
          *ngIf="application.canEdit"
          mat-flat-button
          color="primary"
        >
          Edit Application
        </button>
        <button
          *ngIf="application.canReview"
          (click)="onReview(application.fileNumber)"
          mat-flat-button
          color="primary"
        >
          Review Application
        </button>
      </div>
    </div>
  </div>
  <div *ngIf="application && mobileStep === MOBILE_STEP.ALC_INFO" class="content">
    <app-alc-review [$applicationDocuments]="$applicationDocuments" [$application]="$application"></app-alc-review>
    <div class="buttons" *ngIf="application">
      <div>
        <button *ngIf="application.canEdit" mat-stroked-button color="warn" (click)="onCancel(application.fileNumber)">
          Cancel Application
        </button>
      </div>
      <div>
        <button
          [routerLink]="'/application/' + application.fileNumber + '/edit'"
          *ngIf="application.canEdit"
          mat-flat-button
          color="primary"
        >
          Edit Application
        </button>
        <button
          *ngIf="application.canReview"
          (click)="onReview(application.fileNumber)"
          mat-flat-button
          color="primary"
        >
          Review Application
        </button>
      </div>
    </div>
  </div>
</div>

<div *ngIf="application && application.canReview" class="action-bar">
  <button (click)="onReview(application.fileNumber)" mat-button>
    <div>
      <span
        *ngIf="application.status.code === APPLICATION_STATUS.IN_REVIEW"
        (click)="onReview(application.fileNumber)"
        class="subheading2"
        >Continue Application Review</span
      >
      <span
        *ngIf="application.status.code === APPLICATION_STATUS.SUBMITTED_TO_LG"
        (click)="onReview(application.fileNumber)"
        class="subheading2"
        >Start Application Review</span
      >
      <mat-icon>keyboard_double_arrow_right</mat-icon>
    </div>
  </button>
</div>
<div *ngIf="application && application.canEdit" class="action-bar">
  <button [routerLink]="'/application/' + application.fileNumber + '/edit'" mat-button>
    <div>
      <span class="subheading2">Continue Application </span>
      <mat-icon>keyboard_double_arrow_right</mat-icon>
    </div>
  </button>
</div>
