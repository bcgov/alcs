<h2>Review & Submit</h2>
<div>
  @if (_applicationReview) {
    <div class="description">
      <div>Complete {{ _applicationReview.governmentName }} review and submit to ALC</div>
    </div>
  }
  @if (_applicationReview && !isMobile) {
    <div class="mobile-hidden">
      <section>
        <h4>1. Contact Information</h4>
        <div class="review-table">
          <div>
            <div class="subheading2">Local Government File Number</div>
            <div>
              {{ _applicationReview.localGovernmentFileNumber }}
              @if (!_applicationReview.localGovernmentFileNumber) {
                <app-no-data [showRequired]="showErrors">
                </app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">First Name</div>
            <div>
              {{ _applicationReview.firstName }}
              @if (!_applicationReview.firstName) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Last Name</div>
            <div>
              {{ _applicationReview.lastName }}
              @if (!_applicationReview.lastName) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Position</div>
            <div>
              {{ _applicationReview.position }}
              @if (!_applicationReview.position) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Department</div>
            <div>
              {{ _applicationReview.department }}
              @if (!_applicationReview.department) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Phone Number</div>
            <div>
              {{ _applicationReview.phoneNumber ?? '' | mask : '(000) 000-0000' }}
              @if (!_applicationReview.phoneNumber) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Email</div>
            <div>
              {{ _applicationReview.email }}
              @if (!_applicationReview.email) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div class="edit-button">
            <button mat-flat-button (click)="onNavigateToStep(0)" color="accent">Edit Section</button>
          </div>
        </div>
      </section>
      <section>
        <h4>2. Plans & Bylaws: OCP</h4>
        <div class="review-table">
          <div class="full-width">
            <div class="subheading2">Is the application parcel(s) subject to a Local Government OCP designation?</div>
            <div>
              @if (_applicationReview.isOCPDesignation !== null) {
                <span>{{
                  _applicationReview.isOCPDesignation ? 'Yes' : 'No'
                }}</span>
              }
              @if (_applicationReview.isOCPDesignation === null) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          @if (_applicationReview.isOCPDesignation) {
            <div>
              <div class="subheading2">OCP Bylaw Name</div>
              <div>
                {{ _applicationReview.OCPBylawName }}
                @if (!_applicationReview.OCPBylawName) {
                  <app-no-data [showRequired]="showErrors"></app-no-data>
                }
              </div>
            </div>
          }
          @if (_applicationReview.isOCPDesignation) {
            <div>
              <div class="subheading2">OCP Designation</div>
              <div>
                {{ _applicationReview.OCPDesignation }}
                @if (!_applicationReview.OCPDesignation) {
                  <app-no-data [showRequired]="showErrors"></app-no-data>
                }
              </div>
            </div>
          }
          @if (_applicationReview.isOCPDesignation) {
            <div>
              <div class="subheading2">Is this proposal consistent with the current OCP designation?</div>
              <div>
                @if (_applicationReview.OCPConsistent !== null) {
                  <span>{{
                    _applicationReview.OCPConsistent ? 'Yes' : 'No'
                  }}</span>
                }
                @if (_applicationReview.OCPConsistent === null) {
                  <app-no-data [showRequired]="showErrors"></app-no-data>
                }
              </div>
            </div>
          }
          <div class="edit-button">
            <button mat-flat-button (click)="onNavigateToStep(1)" color="accent">Edit Section</button>
          </div>
        </div>
      </section>
      <section>
        <h4>3. Plans & Bylaws: Zoning</h4>
        <div class="review-table">
          <div class="full-width">
            <div class="subheading2">Is the application parcel(s) subject to a Local Government zoning designation?</div>
            <div>
              @if (_applicationReview.isSubjectToZoning !== null) {
                <span>{{
                  _applicationReview.isSubjectToZoning ? 'Yes' : 'No'
                }}</span>
              }
              @if (_applicationReview.isSubjectToZoning === null) {
                <app-no-data
                  [showRequired]="showErrors"
                ></app-no-data>
              }
            </div>
          </div>
          @if (_applicationReview.isSubjectToZoning) {
            <div>
              <div class="subheading2">Zoning Bylaw Name</div>
              <div>
                {{ _applicationReview.zoningBylawName }}
                @if (!_applicationReview.zoningBylawName) {
                  <app-no-data [showRequired]="showErrors"></app-no-data>
                }
              </div>
            </div>
          }
          @if (_applicationReview.isSubjectToZoning) {
            <div>
              <div class="subheading2">
                Zoning Designation
                @if (!_applicationReview.isSubjectToZoning === null) {
                  <app-no-data
                    [showRequired]="showErrors"
                  ></app-no-data>
                }
              </div>
              <div>
                {{ _applicationReview.zoningDesignation }}
                @if (!_applicationReview.zoningDesignation) {
                  <app-no-data [showRequired]="showErrors"></app-no-data>
                }
              </div>
            </div>
          }
          @if (_applicationReview.isSubjectToZoning) {
            <div>
              <div class="subheading2">Minimum Lot Size (hectares)</div>
              <div>
                {{ _applicationReview.zoningMinimumLotSize
                }}@if (_applicationReview.zoningMinimumLotSize) {
                <span> ha</span>
              }
              @if (!_applicationReview.zoningMinimumLotSize) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
        }
        @if (_applicationReview.isSubjectToZoning) {
          <div>
            <div class="subheading2">Is this proposal consistent with the current zoning designation?</div>
            <div>
              @if (_applicationReview.isZoningConsistent !== null) {
                <span>{{
                  _applicationReview.isZoningConsistent ? 'Yes' : 'No'
                }}</span>
              }
              @if (_applicationReview.isZoningConsistent === null) {
                <app-no-data
                  [showRequired]="showErrors"
                ></app-no-data>
              }
            </div>
          </div>
        }
        <div class="edit-button">
          <button mat-flat-button (click)="onNavigateToStep(2)" color="accent">Edit Section</button>
        </div>
      </div>
    </section>
    <section>
      <h4>4. Resolution</h4>
      <div class="review-table">
        @if (_applicationReview.isOCPDesignation === null || _applicationReview.isSubjectToZoning === null) {
          <div
            class="full-width"
            >
            Please complete both Step 2 Plans & Bylaws: OCP and Step 3 Plans & Bylaws: Zoning to continue with this step.
          </div>
        }
        @if (_applicationReview.isOCPDesignation === false && _applicationReview.isSubjectToZoning === false) {
          <div
            class="full-width"
            >
            By indicating that the parcel(s) is not subject to Local Government OCP or Zoning,
            <strong>no authorizing resolution is required</strong> as per S. 25 (3) or S. 29 (4) of the <em>ALC Act</em>.
            The only option available to you is to forward this application on to the ALC.
          </div>
        }
        @if (
          _applicationReview.isOCPDesignation !== null &&
          _applicationReview.isSubjectToZoning !== null &&
          (_applicationReview.isOCPDesignation === true || _applicationReview.isSubjectToZoning === true)
          ) {
          <div
            class="full-width"
            >
            <div class="subheading2">What is the outcome of the Board/Council resolution?</div>
            <div>
              @if (_applicationReview.isAuthorized !== null) {
                <span>{{
                  _applicationReview.isAuthorized ? 'Forward for ALC decision' : 'Refuse to forward to ALC'
                }}</span>
              }
              @if (_applicationReview.isAuthorized === null) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
        }
        @if (_applicationReview.isOCPDesignation !== null && _applicationReview.isSubjectToZoning !== null) {
          <div
            class="edit-button"
            >
            <button mat-flat-button (click)="onNavigateToStep(3)" color="accent">Edit Section</button>
          </div>
        }
      </div>
    </section>
    <section>
      <h4>5. Attachments</h4>
      @if (!this.hasCompletedStepsBeforeDocuments) {
        <div class="review-table">
          <div class="full-width">
            Please complete Step 2 Plans & Bylaws: OCP, Step 3 Plans & Bylaws: Zoning and Step 4 Resolution to continue
            with this step.
          </div>
        </div>
      }
      @if (this.hasCompletedStepsBeforeDocuments) {
        <div class="review-table">
          @if (_applicationReview.isOCPDesignation || _applicationReview.isSubjectToZoning) {
            <div class="full-width">
              <div class="subheading2">Resolution Document</div>
              <div>
                @for (file of resolutionDocument; track file) {
                  @if (isMobile) {
                    <a class="link" (click)="downloadFile(file.documentUuid)">{{ file.fileName }}</a>
                  }
                  @if (!isMobile) {
                    <a class="link" routerLink="/document/{{ file.documentUuid }}" target="_blank">{{
                      file.fileName
                    }}</a>
                  }
                }
                @if (resolutionDocument.length === 0) {
                  <app-no-data [showRequired]="showErrors"></app-no-data>
                }
              </div>
            </div>
          }
          @if (_applicationReview.isOCPDesignation || _applicationReview.isSubjectToZoning) {
            <div class="full-width">
              <div class="subheading2">
                Staff Report @if (_applicationReview.isAuthorized === false) {
                <span>(optional)</span>
              }
            </div>
            <div>
              @for (file of staffReport; track file) {
                <div class="document">
                  @if (isMobile) {
                    <a class="link" (click)="downloadFile(file.documentUuid)">{{ file.fileName }}</a>
                  }
                  @if (!isMobile) {
                    <a class="link" routerLink="/document/{{ file.documentUuid }}" target="_blank">{{
                      file.fileName
                    }}</a>
                  }
                </div>
              }
              @if (staffReport.length === 0) {
                <app-no-data
                  [showRequired]="showErrors && _applicationReview.isAuthorized === true"
                ></app-no-data>
              }
            </div>
          </div>
        }
        <div class="full-width">
          <div class="subheading2">Other Attachments (optional):</div>
          <div>
            @for (file of otherAttachments; track file) {
              <div class="document">
                @if (isMobile) {
                  <a class="link" (click)="downloadFile(file.documentUuid)">{{ file.fileName }}</a>
                }
                @if (!isMobile) {
                  <a class="link" routerLink="/document/{{ file.documentUuid }}" target="_blank">{{
                    file.fileName
                  }}</a>
                }
              </div>
            }
            @if (otherAttachments.length === 0) {
              <app-no-data></app-no-data>
            }
          </div>
        </div>
        <div class="edit-button">
          <button mat-flat-button (click)="onNavigateToStep(4)" color="accent">Edit Section</button>
        </div>
      </div>
    }
  </section>
</div>
}
@if (_applicationReview && isMobile) {
  <div class="tablet-hidden">
    <mat-expansion-panel #contactInfo>
      <mat-expansion-panel-header>
        <h4>1. Contact Information</h4>
      </mat-expansion-panel-header>
      <div class="review-table">
        <div>
          <div class="subheading2">Local Government File Number</div>
          <div>
            {{ _applicationReview.localGovernmentFileNumber }}
            @if (!_applicationReview.localGovernmentFileNumber) {
              <app-no-data
                [showRequired]="showErrors"
              ></app-no-data>
            }
          </div>
        </div>
        <div>
          <div class="subheading2">First Name</div>
          <div>
            {{ _applicationReview.firstName }}
            @if (!_applicationReview.firstName) {
              <app-no-data [showRequired]="showErrors"></app-no-data>
            }
          </div>
        </div>
        <div>
          <div class="subheading2">Last Name</div>
          <div>
            {{ _applicationReview.lastName }}
            @if (!_applicationReview.lastName) {
              <app-no-data [showRequired]="showErrors"></app-no-data>
            }
          </div>
        </div>
        <div>
          <div class="subheading2">Position</div>
          <div>
            {{ _applicationReview.position }}
            @if (!_applicationReview.position) {
              <app-no-data [showRequired]="showErrors"></app-no-data>
            }
          </div>
        </div>
        <div>
          <div class="subheading2">Department</div>
          <div>
            {{ _applicationReview.department }}
            @if (!_applicationReview.department) {
              <app-no-data [showRequired]="showErrors"></app-no-data>
            }
          </div>
        </div>
        <div>
          <div class="subheading2">Phone Number</div>
          <div>
            {{ _applicationReview.phoneNumber ?? '' | mask : '(000) 000-0000' }}
            @if (!_applicationReview.phoneNumber) {
              <app-no-data [showRequired]="showErrors"></app-no-data>
            }
          </div>
        </div>
        <div>
          <div class="subheading2">Email</div>
          <div>
            {{ _applicationReview.email }}
            @if (!_applicationReview.email) {
              <app-no-data [showRequired]="showErrors"></app-no-data>
            }
          </div>
        </div>
        <div class="edit-button">
          <button mat-flat-button (click)="onNavigateToStep(0)" color="accent">Edit Section</button>
        </div>
      </div>
    </mat-expansion-panel>
    <mat-expansion-panel #ocpInfo>
      <mat-expansion-panel-header>
        <h4>2. Plans & Bylaws: OCP</h4>
      </mat-expansion-panel-header>
      <div class="review-table">
        <div class="full-width">
          <div class="subheading2">Is the application parcel(s) subject to a Local Government OCP designation?</div>
          <div>
            @if (_applicationReview.isOCPDesignation !== null) {
              <span>{{
                _applicationReview.isOCPDesignation ? 'Yes' : 'No'
              }}</span>
            }
            @if (_applicationReview.isOCPDesignation === null) {
              <app-no-data [showRequired]="showErrors"></app-no-data>
            }
          </div>
        </div>
        @if (_applicationReview.isOCPDesignation) {
          <div>
            <div class="subheading2">OCP Bylaw Name</div>
            <div>
              {{ _applicationReview.OCPBylawName }}
              @if (!_applicationReview.OCPBylawName) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
        }
        @if (_applicationReview.isOCPDesignation) {
          <div>
            <div class="subheading2">OCP Designation</div>
            <div>
              {{ _applicationReview.OCPDesignation }}
              @if (!_applicationReview.OCPDesignation) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
        }
        @if (_applicationReview.isOCPDesignation) {
          <div>
            <div class="subheading2">Is this proposal consistent with the current OCP designation?</div>
            <div>
              @if (_applicationReview.OCPConsistent !== null) {
                <span>{{
                  _applicationReview.OCPConsistent ? 'Yes' : 'No'
                }}</span>
              }
              @if (_applicationReview.OCPConsistent === null) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
        }
        <div class="edit-button">
          <button mat-flat-button (click)="onNavigateToStep(1)" color="accent">Edit Section</button>
        </div>
      </div>
    </mat-expansion-panel>
    <mat-expansion-panel #zoningInfo>
      <mat-expansion-panel-header><h4>3. Plans & Bylaws: Zoning</h4></mat-expansion-panel-header>
      <div class="review-table">
        <div class="full-width">
          <div class="subheading2">Is the application parcel(s) subject to a Local Government zoning designation?</div>
          <div>
            @if (_applicationReview.isSubjectToZoning !== null) {
              <span>{{
                _applicationReview.isSubjectToZoning ? 'Yes' : 'No'
              }}</span>
            }
            @if (_applicationReview.isSubjectToZoning === null) {
              <app-no-data
                [showRequired]="showErrors"
              ></app-no-data>
            }
          </div>
        </div>
        @if (_applicationReview.isSubjectToZoning) {
          <div>
            <div class="subheading2">Zoning Bylaw Name</div>
            <div>
              {{ _applicationReview.zoningBylawName }}
              @if (!_applicationReview.zoningBylawName) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
        }
        @if (_applicationReview.isSubjectToZoning) {
          <div>
            <div class="subheading2">Zoning Designation</div>
            <div>
              {{ _applicationReview.zoningDesignation }}
              @if (!_applicationReview.zoningDesignation) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
        }
        @if (_applicationReview.isSubjectToZoning) {
          <div>
            <div class="subheading2">
              Minimum Lot Size (hectares)@if (_applicationReview.zoningMinimumLotSize) {
              <span> ha</span>
            }
          </div>
          <div>
            {{ _applicationReview.zoningMinimumLotSize }}
            @if (!_applicationReview.zoningMinimumLotSize) {
              <app-no-data [showRequired]="showErrors"></app-no-data>
            }
          </div>
        </div>
      }
      @if (_applicationReview.isSubjectToZoning) {
        <div>
          <div class="subheading2">Is this proposal consistent with the current zoning designation?</div>
          <div>
            @if (_applicationReview.isZoningConsistent !== null) {
              <span>{{
                _applicationReview.isZoningConsistent ? 'Yes' : 'No'
              }}</span>
            }
            @if (_applicationReview.isZoningConsistent === null) {
              <app-no-data
                [showRequired]="showErrors"
              ></app-no-data>
            }
          </div>
        </div>
      }
      <div class="edit-button">
        <button mat-flat-button (click)="onNavigateToStep(2)" color="accent">Edit Section</button>
      </div>
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel #authorizationInfo>
    <mat-expansion-panel-header>
      <h4>4. Resolution</h4>
    </mat-expansion-panel-header>
    <div class="review-table">
      @if (_applicationReview.isOCPDesignation === null || _applicationReview.isSubjectToZoning === null) {
        <div
          class="full-width"
          >
          Please complete both Step 2 Plans & Bylaws: OCP and Step 3 Plans & Bylaws: Zoning to continue with this step.
        </div>
      }
      @if (_applicationReview.isOCPDesignation === false && _applicationReview.isSubjectToZoning === false) {
        <div
          class="full-width"
          >
          By indicating that the parcel(s) is not subject to Local Government OCP or Zoning,
          <strong>no authorizing resolution is required</strong> as per S. 25 (3) or S. 29 (4) of the <em>ALC Act</em>.
          The only option available to you is to forward this application on to the ALC.
        </div>
      }
      @if (
        _applicationReview.isOCPDesignation !== null &&
        _applicationReview.isSubjectToZoning !== null &&
        (_applicationReview.isOCPDesignation === true || _applicationReview.isSubjectToZoning === true)
        ) {
        <div
          class="full-width"
          >
          <div class="subheading2">What is the outcome of the Board/Council resolution?</div>
          <div>
            @if (_applicationReview.isAuthorized !== null) {
              <span>{{
                _applicationReview.isAuthorized ? 'Forward for ALC decision' : 'Refuse to forward to ALC'
              }}</span>
            }
            @if (_applicationReview.isAuthorized === null) {
              <app-no-data [showRequired]="showErrors"></app-no-data>
            }
          </div>
        </div>
      }
      @if (_applicationReview.isOCPDesignation !== null && _applicationReview.isSubjectToZoning !== null) {
        <div
          class="edit-button"
          >
          <button mat-flat-button (click)="onNavigateToStep(3)" color="accent">Edit Section</button>
        </div>
      }
    </div>
  </mat-expansion-panel>
  <mat-expansion-panel #attachmentInfo>
    <mat-expansion-panel-header>
      <h4>5. Attachments</h4>
    </mat-expansion-panel-header>
    @if (!this.hasCompletedStepsBeforeDocuments) {
      <div class="review-table">
        <div class="full-width">
          Please complete Step 2 Plans & Bylaws: OCP, Step 3 Plans & Bylaws: Zoning and Step 4 Resolution to continue
          with this step.
        </div>
      </div>
    }
    @if (this.hasCompletedStepsBeforeDocuments) {
      <div class="review-table">
        @if (_applicationReview.isOCPDesignation || _applicationReview.isSubjectToZoning) {
          <div>
            <div class="subheading2">Resolution Document</div>
            <div>
              @for (file of resolutionDocument; track file) {
                @if (isMobile) {
                  <a class="link" (click)="downloadFile(file.documentUuid)">{{ file.fileName }}</a>
                }
                @if (!isMobile) {
                  <a class="link" routerLink="/document/{{ file.documentUuid }}" target="_blank">{{
                    file.fileName
                  }}</a>
                }
              }
              @if (resolutionDocument.length === 0) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
        }
        @if (_applicationReview.isOCPDesignation || _applicationReview.isSubjectToZoning) {
          <div>
            <div class="subheading2">
              Staff Report @if (_applicationReview.isAuthorized === false) {
              <span>(optional)</span>
            }
          </div>
          <div>
            @for (file of staffReport; track file) {
              <div class="document">
                @if (isMobile) {
                  <a class="link" (click)="downloadFile(file.documentUuid)">{{ file.fileName }}</a>
                }
                @if (!isMobile) {
                  <a class="link" routerLink="/document/{{ file.documentUuid }}" target="_blank">{{
                    file.fileName
                  }}</a>
                }
              </div>
            }
            @if (staffReport.length === 0) {
              <app-no-data
                [showRequired]="showErrors && _applicationReview.isAuthorized === true"
              ></app-no-data>
            }
          </div>
        </div>
      }
      <div class="full-width">
        <div class="subheading2">Other Attachments (optional):</div>
        <div>
          @for (file of otherAttachments; track file) {
            <div class="document">
              @if (isMobile) {
                <a class="link" (click)="downloadFile(file.documentUuid)">{{ file.fileName }}</a>
              }
              @if (!isMobile) {
                <a class="link" routerLink="/document/{{ file.documentUuid }}" target="_blank">{{
                  file.fileName
                }}</a>
              }
            </div>
          }
          @if (otherAttachments.length === 0) {
            <app-no-data></app-no-data>
          }
        </div>
      </div>
      <div class="edit-button">
        <button mat-flat-button (click)="onNavigateToStep(4)" color="accent">Edit Section</button>
      </div>
    </div>
  }
</mat-expansion-panel>
</div>
}
<div>
  <button (click)="onDownloadPdf()" mat-flat-button color="primary">Download PDF</button>
</div>
<div class="menu">
  <button (click)="onExit()" mat-stroked-button color="accent">Save and Exit</button>
  <div>
    <button mat-stroked-button color="primary" (click)="onNavigateToStep(currentStep - 1)">
      Previous<span class="mobile-hidden"> Step</span>
    </button>
    <button (click)="onSubmit()" mat-flat-button color="primary">Submit</button>
  </div>
</div>
</div>
