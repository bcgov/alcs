<h2>Review & Submit</h2>
<div>
  @if (_applicationReview) {
    <div class="description">
      <div>Complete {{ _applicationReview.governmentName }} review and submit to ALC</div>
    </div>
  }
  @if (_applicationReview && !isMobile) {
    <div>
      <section>
        <h4>1. Contact Information</h4>
        <div class="review-table">
          <div>
            <div class="subheading2">First Nation Government File Number</div>
            <div>
              {{ _applicationReview.localGovernmentFileNumber }}
              @if (!_applicationReview.localGovernmentFileNumber) {
                <app-no-data [showRequired]="showErrors">
                </app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">First Name</div>
            <div>
              {{ _applicationReview.firstName }}
              @if (!_applicationReview.firstName) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Last Name</div>
            <div>
              {{ _applicationReview.lastName }}
              @if (!_applicationReview.lastName) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Position</div>
            <div>
              {{ _applicationReview.position }}
              @if (!_applicationReview.position) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Department</div>
            <div>
              {{ _applicationReview.department }}
              @if (!_applicationReview.department) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Phone Number</div>
            <div>
              {{ _applicationReview.phoneNumber ?? '' | mask : '(000) 000-0000' }}
              @if (!_applicationReview.phoneNumber) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Email</div>
            <div>
              {{ _applicationReview.email }}
              @if (!_applicationReview.email) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div class="edit-button">
            <button mat-flat-button (click)="onNavigateToStep(0)" color="accent">Edit Section</button>
          </div>
        </div>
      </section>
      <section>
        <h4>2. Resolution</h4>
        <div class="review-table">
          <div class="full-width">
            <div class="subheading2">What is the outcome of the Board/Council resolution?</div>
            <div>
              @if (_applicationReview.isAuthorized !== null) {
                <span>{{
                  _applicationReview.isAuthorized ? 'Forward for ALC decision' : 'Refuse to forward to ALC'
                }}</span>
              }
              @if (_applicationReview.isAuthorized === null) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div class="edit-button">
            <button mat-flat-button (click)="onNavigateToStep(1)" color="accent">Edit Section</button>
          </div>
        </div>
      </section>
      <section>
        <h4>3. Attachments</h4>
        <div class="review-table">
          <div>
            <div class="subheading2">Resolution Document</div>
            <div>
              @for (file of resolutionDocument; track file) {
                @if (isMobile) {
                  <a class="link" (click)="downloadFile(file.documentUuid)">{{ file.fileName }}</a>
                }
                @if (!isMobile) {
                  <a class="link" routerLink="/document/{{ file.documentUuid }}" target="_blank">{{
                    file.fileName
                  }}</a>
                }
              }
              @if (resolutionDocument.length === 0) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Other Attachments (optional):</div>
            <div>
              @for (file of otherAttachments; track file) {
                <div class="document">
                  @if (isMobile) {
                    <a class="link" (click)="downloadFile(file.documentUuid)">{{ file.fileName }}</a>
                  }
                  @if (!isMobile) {
                    <a class="link" routerLink="/document/{{ file.documentUuid }}" target="_blank">{{
                      file.fileName
                    }}</a>
                  }
                </div>
              }
              @if (otherAttachments.length === 0) {
                <app-no-data></app-no-data>
              }
            </div>
          </div>
          <div class="edit-button">
            <button mat-flat-button (click)="onNavigateToStep(2)" color="accent">Edit Section</button>
          </div>
        </div>
      </section>
    </div>
  }
  @if (_applicationReview && isMobile) {
    <div>
      <mat-expansion-panel #contactInfo>
        <mat-expansion-panel-header>
          <h4>1. Contact Information</h4>
        </mat-expansion-panel-header>
        <div class="review-table">
          <div>
            <div class="subheading2">First Nation Government File Number</div>
            <div>
              {{ _applicationReview.localGovernmentFileNumber }}
              @if (!_applicationReview.localGovernmentFileNumber) {
                <app-no-data
                  [showRequired]="showErrors"
                ></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">First Name</div>
            <div>
              {{ _applicationReview.firstName }}
              @if (!_applicationReview.firstName) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Last Name</div>
            <div>
              {{ _applicationReview.lastName }}
              @if (!_applicationReview.lastName) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Position</div>
            <div>
              {{ _applicationReview.position }}
              @if (!_applicationReview.position) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Department</div>
            <div>
              {{ _applicationReview.department }}
              @if (!_applicationReview.department) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Phone Number</div>
            <div>
              {{ _applicationReview.phoneNumber ?? '' | mask : '(000) 000-0000' }}
              @if (!_applicationReview.phoneNumber) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Email</div>
            <div>
              {{ _applicationReview.email }}
              @if (!_applicationReview.email) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div class="edit-button">
            <button mat-flat-button (click)="onNavigateToStep(0)" color="accent">Edit Section</button>
          </div>
        </div>
      </mat-expansion-panel>
      <mat-expansion-panel #resolutionInfo>
        <mat-expansion-panel-header>
          <h4>2. Resolution</h4>
        </mat-expansion-panel-header>
        <div class="review-table">
          <div class="full-width">
            <div class="subheading2">What is the outcome of the Board/Council resolution?</div>
            <div>
              @if (_applicationReview.isAuthorized !== null) {
                <span>{{
                  _applicationReview.isAuthorized ? 'Forward for ALC decision' : 'Refuse to forward to ALC'
                }}</span>
              }
              @if (_applicationReview.isAuthorized === null) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div class="edit-button">
            <button mat-flat-button (click)="onNavigateToStep(1)" color="accent">Edit Section</button>
          </div>
        </div>
      </mat-expansion-panel>
      <mat-expansion-panel #attachmentInfo>
        <mat-expansion-panel-header>
          <h4>3. Attachments</h4>
        </mat-expansion-panel-header>
        <div class="review-table">
          <div>
            <div class="subheading2">Resolution Document</div>
            <div>
              @for (file of resolutionDocument; track file) {
                @if (isMobile) {
                  <a class="link" (click)="downloadFile(file.documentUuid)">{{ file.fileName }}</a>
                }
                @if (!isMobile) {
                  <a class="link" routerLink="/document/{{ file.documentUuid }}" target="_blank">{{
                    file.fileName
                  }}</a>
                }
              }
              @if (resolutionDocument.length === 0) {
                <app-no-data [showRequired]="showErrors"></app-no-data>
              }
            </div>
          </div>
          <div>
            <div class="subheading2">Other Attachments (optional):</div>
            <div>
              @for (file of otherAttachments; track file) {
                <div>
                  @if (isMobile) {
                    <a class="link" (click)="downloadFile(file.documentUuid)">{{ file.fileName }}</a>
                  }
                  @if (!isMobile) {
                    <a class="link" routerLink="/document/{{ file.documentUuid }}" target="_blank">{{
                      file.fileName
                    }}</a>
                  }
                </div>
              }
              @if (otherAttachments.length === 0) {
                <app-no-data></app-no-data>
              }
            </div>
          </div>
          <div class="edit-button">
            <button mat-flat-button (click)="onNavigateToStep(2)" color="accent">Edit Section</button>
          </div>
        </div>
      </mat-expansion-panel>
    </div>
  }
  <div>
    <button (click)="onDownloadPdf()" mat-flat-button color="primary">Download PDF</button>
  </div>
  <div class="menu">
    <button (click)="onExit()" mat-stroked-button color="accent">Save and Exit</button>
    <div>
      <button mat-stroked-button color="primary" (click)="onNavigateToStep(currentStep - 1)">
        Previous<span class="mobile-hidden"> Step</span>
      </button>
      <button (click)="onSubmit()" mat-flat-button color="primary">Submit</button>
    </div>
  </div>
</div>
