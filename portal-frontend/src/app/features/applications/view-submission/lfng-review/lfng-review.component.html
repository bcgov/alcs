@if (application) {
  <div>
    <div class="header">
      <h2>Local/First Nation Gov Review</h2>
      <div class="btns-wrapper">
        <button
        [disabled]="
          !applicationReview ||
          (!application.canReview && application.status.code === SUBMISSION_STATUS.IN_REVIEW_BY_LG)
        "
          (click)="onDownloadReviewPdf(application.fileNumber)"
          mat-flat-button
          color="accent"
          >
          Download PDF
        </button>
      </div>
    </div>
    @if (
      (application.status.code === SUBMISSION_STATUS.IN_PROGRESS ||
      application.status.code === SUBMISSION_STATUS.WRONG_GOV ||
      application.status.code === SUBMISSION_STATUS.INCOMPLETE) &&
      !isTurOrCov
      ) {
      <app-warning-banner
        >
        This section will update after the application is submitted.
      </app-warning-banner>
    }
    @if (
      (application.status.code === SUBMISSION_STATUS.IN_PROGRESS ||
      application.status.code === SUBMISSION_STATUS.WRONG_GOV ||
      application.status.code === SUBMISSION_STATUS.INCOMPLETE) &&
      isTurOrCov
      ) {
      <app-warning-banner
        >
        Application not subject to Local/First Nation Government review.
      </app-warning-banner>
    }
    @if (!applicationReview && submittedToAlcStatus) {
      <app-warning-banner>
        Application not subject to Local/First Nation Government review.
      </app-warning-banner>
    }
    @if (
      application.status.code === SUBMISSION_STATUS.SUBMITTED_TO_LG ||
      (application.status.code === SUBMISSION_STATUS.IN_REVIEW_BY_LG && (!applicationReview || !application.canReview))
      ) {
      <app-warning-banner
        >
        Pending Local/First Nation Government review.
      </app-warning-banner>
    }
    @if (application.status.code === SUBMISSION_STATUS.RETURNED_TO_LG) {
      <div class="comment-container">
        <div><strong>Comment for L/FNG</strong></div>
        {{ application.returnedToLfngComment }}
      </div>
    }
    @if (applicationReview) {
      <div>
        <section>
          <h4>Contact Information</h4>
          <div class="review-table">
            <div>
              <div class="subheading2">Local Government File Number</div>
              <div>
                {{ applicationReview.localGovernmentFileNumber }}
                @if (!applicationReview.localGovernmentFileNumber) {
                  <app-no-data></app-no-data>
                }
              </div>
            </div>
            <div>
              <div class="subheading2">First Name</div>
              <div>
                {{ applicationReview.firstName }}
                @if (!applicationReview.firstName) {
                  <app-no-data></app-no-data>
                }
              </div>
            </div>
            <div>
              <div class="subheading2">Last Name</div>
              <div>
                {{ applicationReview.lastName }}
                @if (!applicationReview.lastName) {
                  <app-no-data></app-no-data>
                }
              </div>
            </div>
            <div>
              <div class="subheading2">Position</div>
              <div>
                {{ applicationReview.position }}
                @if (!applicationReview.position) {
                  <app-no-data></app-no-data>
                }
              </div>
            </div>
            <div>
              <div class="subheading2">Department</div>
              <div>
                {{ applicationReview.department }}
                @if (!applicationReview.department) {
                  <app-no-data></app-no-data>
                }
              </div>
            </div>
            <div>
              <div class="subheading2">Phone Number</div>
              <div>
                {{ applicationReview.phoneNumber ?? '' | mask: '(000) 000-0000' }}
                @if (!applicationReview.phoneNumber) {
                  <app-no-data></app-no-data>
                }
              </div>
            </div>
            <div>
              <div class="subheading2">Email</div>
              <div>
                {{ applicationReview.email }}
                @if (!applicationReview.email) {
                  <app-no-data></app-no-data>
                }
              </div>
            </div>
          </div>
        </section>
        @if (!applicationReview.isFirstNationGovernment) {
          <section>
            <h4>Plans & Bylaws: OCP</h4>
            <div class="review-table">
              <div class="full-width">
                <div class="subheading2">Is the application parcel(s) subject to a Local Government OCP designation?</div>
                <div>
                  @if (applicationReview.isOCPDesignation !== null) {
                    <span>{{
                      applicationReview.isOCPDesignation ? 'Yes' : 'No'
                    }}</span>
                  }
                  @if (applicationReview.isOCPDesignation === null) {
                    <app-no-data></app-no-data>
                  }
                </div>
              </div>
              @if (applicationReview.isOCPDesignation) {
                <div>
                  <div class="subheading2">OCP Bylaw Name</div>
                  <div>
                    {{ applicationReview.OCPBylawName }}
                    @if (!applicationReview.OCPBylawName) {
                      <app-no-data></app-no-data>
                    }
                  </div>
                </div>
              }
              @if (applicationReview.isOCPDesignation) {
                <div>
                  <div class="subheading2">OCP Designation</div>
                  <div>
                    {{ applicationReview.OCPDesignation }}
                    @if (!applicationReview.OCPDesignation) {
                      <app-no-data></app-no-data>
                    }
                  </div>
                </div>
              }
              @if (applicationReview.isOCPDesignation) {
                <div>
                  <div class="subheading2">Is this proposal consistent with the current OCP designation?</div>
                  <div>
                    @if (applicationReview.OCPConsistent !== null) {
                      <span>{{
                        applicationReview.OCPConsistent ? 'Yes' : 'No'
                      }}</span>
                    }
                    @if (applicationReview.OCPConsistent === null) {
                      <app-no-data></app-no-data>
                    }
                  </div>
                </div>
              }
            </div>
          </section>
        }
        @if (!applicationReview.isFirstNationGovernment) {
          <section>
            <h4>Plans & Bylaws: Zoning</h4>
            <div class="review-table">
              <div class="full-width">
                <div class="subheading2">Is the application parcel(s) subject to a Local Government zoning designation?</div>
                <div>
                  @if (applicationReview.isSubjectToZoning !== null) {
                    <span>{{
                      applicationReview.isSubjectToZoning ? 'Yes' : 'No'
                    }}</span>
                  }
                  @if (applicationReview.isSubjectToZoning === null) {
                    <app-no-data></app-no-data>
                  }
                </div>
              </div>
              @if (applicationReview.isSubjectToZoning) {
                <div>
                  <div class="subheading2">Zoning Bylaw Name</div>
                  <div>
                    {{ applicationReview.zoningBylawName }}
                    @if (!applicationReview.zoningBylawName) {
                      <app-no-data></app-no-data>
                    }
                  </div>
                </div>
              }
              @if (applicationReview.isSubjectToZoning) {
                <div>
                  <div class="subheading2">Zoning Designation</div>
                  <div>
                    {{ applicationReview.zoningDesignation }}
                    @if (!applicationReview.zoningDesignation) {
                      <app-no-data></app-no-data>
                    }
                  </div>
                </div>
              }
              @if (applicationReview.isSubjectToZoning) {
                <div>
                  <div class="subheading2">Minimum Lot Size (hectares)</div>
                  <div>
                    {{ applicationReview.zoningMinimumLotSize }}@if (applicationReview.zoningMinimumLotSize) {
                    <span> ha</span>
                  }
                  @if (!applicationReview.zoningMinimumLotSize) {
                    <app-no-data></app-no-data>
                  }
                </div>
              </div>
            }
            @if (applicationReview.isSubjectToZoning) {
              <div>
                <div class="subheading2">Is this proposal consistent with the current zoning designation?</div>
                <div>
                  @if (applicationReview.isZoningConsistent !== null) {
                    <span>{{
                      applicationReview.isZoningConsistent ? 'Yes' : 'No'
                    }}</span>
                  }
                  @if (applicationReview.isZoningConsistent === null) {
                    <app-no-data></app-no-data>
                  }
                </div>
              </div>
            }
          </div>
        </section>
      }
      <section>
        <h4>Resolution</h4>
        <div class="review-table">
          @if (
            !applicationReview.isFirstNationGovernment &&
            (applicationReview.isOCPDesignation === null || applicationReview.isSubjectToZoning === null)
            ) {
            <div
              class="full-width"
              >
              Please complete both Step 2 Plans & Bylaws: OCP and Step 3 Plans & Bylaws: Zoning to continue with this step.
            </div>
          }
          @if (
            !applicationReview.isFirstNationGovernment &&
            applicationReview.isOCPDesignation === false &&
            applicationReview.isSubjectToZoning === false
            ) {
            <div
              class="full-width"
              >
              By indicating that the parcel(s) is not subject to Local Government OCP or Zoning,
              <strong>no authorizing resolution is required</strong> as per S. 25 (3) or S. 29 (4) of the <em>ALC Act</em>.
              The only option available is to forward this application on to the ALC.
            </div>
          }
          @if (hasCompletedStepsBeforeResolution) {
            <div class="full-width">
              <div class="subheading2">What is the outcome of the Board/Council resolution?</div>
              <div>
                @if (applicationReview.isAuthorized !== null) {
                  <span>{{
                    applicationReview.isAuthorized ? 'Forward for ALC decision' : 'Refuse to forward to ALC'
                  }}</span>
                }
                @if (applicationReview.isAuthorized === null) {
                  <app-no-data></app-no-data>
                }
              </div>
            </div>
          }
        </div>
      </section>
      <section>
        <h4>Attachments</h4>
        @if (!hasCompletedStepsBeforeDocuments) {
          <div class="review-table">
            <div class="full-width">
              Please complete Step 2 Plans & Bylaws: OCP, Step 3 Plans & Bylaws: Zoning and Step 4 Resolution to continue
              with this step.
            </div>
          </div>
        }
        @if (hasCompletedStepsBeforeDocuments) {
          <div class="review-table">
            @if (
              applicationReview.isFirstNationGovernment ||
              applicationReview.isOCPDesignation ||
              applicationReview.isSubjectToZoning
              ) {
              <div
                class="full-width"
                >
                <div class="subheading2">Resolution Document</div>
                <div>
                  @for (file of resolutionDocument; track file) {
                    <a class="link" class="mobile" (click)="downloadFile(file.documentUuid)">{{ file.fileName }}</a>
                    <a class="link" class="desktop" routerLink="/document/{{ file.documentUuid }}" target="_blank">{{
                      file.fileName
                    }}</a>
                  }
                </div>
                @if (resolutionDocument.length === 0) {
                  <app-no-data></app-no-data>
                }
              </div>
            }
            @if (applicationReview.isOCPDesignation || applicationReview.isSubjectToZoning) {
              <div class="full-width">
                <div class="subheading2">
                  Staff Report @if (applicationReview.isAuthorized === false) {
                  <span>(optional)</span>
                }
              </div>
              <div>
                @for (file of staffReport; track file) {
                  <div class="document">
                    <a class="link" class="mobile" (click)="downloadFile(file.documentUuid)">{{ file.fileName }}</a>
                    <a class="link" class="desktop" routerLink="/document/{{ file.documentUuid }}" target="_blank">{{
                      file.fileName
                    }}</a>
                  </div>
                }
                @if (staffReport.length === 0) {
                  <app-no-data></app-no-data>
                }
              </div>
            </div>
          }
          <div class="full-width">
            <div class="subheading2">Other Attachments (optional):</div>
            <div>
              @for (file of governmentOtherAttachments; track file) {
                <div class="document">
                  <a class="link" class="mobile" (click)="downloadFile(file.documentUuid)">{{ file.fileName }}</a>
                  <a class="link" class="desktop" routerLink="/document/{{ file.documentUuid }}" target="_blank">{{
                    file.fileName
                  }}</a>
                </div>
              }
              @if (governmentOtherAttachments.length === 0) {
                <app-no-data></app-no-data>
              }
            </div>
          </div>
        </div>
      }
    </section>
  </div>
}
</div>
}
