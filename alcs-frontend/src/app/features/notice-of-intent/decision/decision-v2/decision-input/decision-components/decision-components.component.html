<section>
  <div class='split'>
    <h3>Components</h3>
    <div>
      <button
        [ngClass]="{ 'error-field-outlined ng-invalid': showError }"
        type="button"
        [matMenuTriggerFor]="decisionComponentMenu"
        mat-flat-button
        color="primary"
      >
        Add Component â–¾
      </button>
      <app-error-message *ngIf="showError"></app-error-message>
    </div>
  </div>

  <mat-menu xPosition="before" #decisionComponentMenu="matMenu">
    <button
      *ngFor="let componentType of decisionComponentTypes"
      mat-menu-item
      (click)="onAddNewComponent(componentType.uiCode, componentType.code)"
      [disabled]="componentType.isDisabled"
    >
      <div class="board-menu-item">
        <span>{{ componentType.label }}</span>
      </div>
    </button>
  </mat-menu>

  <div class="component" *ngFor="let component of components; let index = index; trackBy: trackByFn">
    <app-decision-component
      [(data)]="components[index]"
      [codes]="codes"
      (dataChange)="onChange()"
      (remove)='onRemove(index)'
    ></app-decision-component>
  </div>
</section>
