<section>
  <div class="split">
    <h3>Conditions</h3>
  </div>

  <mat-menu xPosition="before" #decisionComponentMenu="matMenu">
    @for (type of activeTypes; track type) {
      <button mat-menu-item (click)="onAddNewCondition(type.code)">
        <div class="board-menu-item">
          <span>{{ type.label }}</span>
        </div>
      </button>
    }
  </mat-menu>

  @for (condition of mappedConditions; track trackByFn(index, condition); let index = $index) {
    <div class="condition">
      <app-app-decision-condition
        [(data)]="mappedConditions[index]"
        (dataChange)="onChanges()"
        (remove)="onRemoveCondition(index)"
        [selectableComponents]="selectableComponents"
        [showDateError]="showDateErrors"
        [index]="index"
      ></app-app-decision-condition>
    </div>
  }
  <div class="cond-footer">
    <div>
      <button
        [disabled]="mappedConditions.length <= 1"
        mat-stroked-button
        class="order-button"
        color="primary"
        type="button"
        (click)="openOrderDialog()"
        >
        Re-Order Conditions
      </button>
    </div>
    <div class="add-condition-container">
      <button
        [ngClass]="{ 'error-field-outlined ng-invalid': showError }"
        type="button"
        [matMenuTriggerFor]="decisionComponentMenu"
        mat-flat-button
        color="primary"
        >
        Add Condition â–¾
      </button>
      @if (showError) {
        <app-error-message></app-error-message>
      }
    </div>
  </div>
</section>
